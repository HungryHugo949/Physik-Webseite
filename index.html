<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Energie verstehen</title>
  <style>
    /* === CSS-START === */
    /* Grundlegende Styles */
    :root {
      --primary: #1976d2;
      --secondary: #ff9800;
      --success: #4caf50;
      --danger: #f44336;
      --light: #f5f7fa;
      --dark: #263238;
    }
    
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--light);
      color: #333;
      line-height: 1.6;
      scroll-behavior: smooth;
    }
    
    /* Progress-Balken */
    .progress-container {
      width: 100%;
      height: 5px;
      background-color: #f1f1f1;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1000;
    }
    
    .progress-bar {
      height: 5px;
      background-color: var(--success);
      width: 0%;
      transition: width 0.3s ease;
    }
    
    /* Navigation */
    #navbar {
      background-color: var(--primary);
      padding: 12px 20px;
      position: sticky;
      top: 5px; /* Unter Progress-Balken */
      z-index: 100;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    #navbar ul {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      padding: 0;
      margin: 0;
      overflow-x: auto;
    }
    
    #navbar a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 4px;
      transition: all 0.3s;
      white-space: nowrap;
    }
    
    #navbar a:hover {
      background-color: #1565c0;
      transform: translateY(-2px);
    }
    
    /* Header */
    .hero {
      background: linear-gradient(135deg, #64b5f6, #42a5f5);
      color: white;
      padding: 80px 20px;
      text-align: center;
      margin-bottom: 30px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }
    
    .hero::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('https://images.unsplash.com/photo-1508514177221-188b1cf16e9d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') center/cover;
      opacity: 0.2;
      z-index: 0;
    }
    
    .hero-text {
      position: relative;
      z-index: 1;
    }
    
    .hero h1 {
      margin: 0;
      font-size: 2.5em;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    }
    
    .hero p {
      margin: 10px 0 0;
      font-size: 1.2em;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }
    
    /* Hauptinhaltsbereich */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Abschnitte */
    section {
      background: white;
      border-radius: 8px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      border-left: 5px solid var(--primary);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    
    section:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    h2 {
      color: var(--primary);
      margin-top: 0;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e0e0;
    }
    
    h3 {
      color: #424242;
      margin-top: 25px;
    }
    
    /* Infoboxen */
    .infobox {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      position: relative;
      overflow: hidden;
    }
    
    .infobox::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
    }
    
    .infobox.orange {
      background-color: #fff3e0;
      border-left: 5px solid #ffa000;
    }
    
    .infobox.green {
      background-color: #e8f5e9;
      border-left: 5px solid var(--success);
    }
    
    .infobox.blue {
      background-color: #e3f2fd;
      border-left: 5px solid var(--primary);
    }
    
    /* Buttons */
    .btn {
      display: inline-block;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      text-align: center;
      transition: all 0.3s;
      border: none;
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: #1565c0;
      transform: translateY(-2px);
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    
    .quiz-btn {
      display: inline-block;
      padding: 10px 15px;
      margin: 5px;
      background-color: #42a5f5;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
    }
    
    .quiz-btn:hover {
      background-color: #1e88e5;
      transform: translateY(-2px);
    }
    
    .quiz-btn.correct {
      background-color: var(--success);
    }
    
    .quiz-btn.incorrect {
      background-color: var(--danger);
    }
    
    .quiz-auswerten-btn {
      background-color: var(--secondary);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 15px;
      transition: all 0.3s;
    }
    
    .quiz-auswerten-btn:hover {
      background-color: #f57c00;
      transform: translateY(-2px);
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    
    /* Feedbackboxen */
    .feedback-box {
      padding: 15px;
      border-radius: 4px;
      margin-top: 15px;
      font-weight: bold;
      transition: all 0.3s;
    }
    
    .feedback-correct {
      background-color: #c8e6c9;
      color: #2e7d32;
      border-left: 4px solid var(--success);
    }
    
    .feedback-incorrect {
      background-color: #ffcdd2;
      color: #c62828;
      border-left: 4px solid var(--danger);
    }
    
    /* Drag & Drop */
    .drag-container {
      margin: 20px 0;
    }
    
    .drag-items {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .drag {
      padding: 12px 18px;
      background-color: #e3f2fd;
      border: 2px solid #bbdefb;
      border-radius: 4px;
      cursor: grab;
      transition: all 0.3s;
      font-size: 1.1em;
    }
    
    .drag:hover {
      transform: translateY(-3px);
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      background-color: #bbdefb;
    }
    
    .drag:active {
      cursor: grabbing;
    }
    
    .drop-area {
      display: flex;
      gap: 20px;
      margin-top: 15px;
    }
    
    .drop-zone {
      flex: 1;
      min-height: 150px;
      border: 2px dashed #90a4ae;
      border-radius: 8px;
      padding: 15px;
      background-color: #f5f5f5;
      transition: all 0.3s;
    }
    
    .drop-zone h4 {
      margin-top: 0;
      text-align: center;
    }
    
    .drop-zone.highlight {
      background-color: #e0f7fa;
      border-color: #4db6ac;
      transform: scale(1.02);
    }
    
    .drag-result {
      background-color: #c8e6c9;
      padding: 10px 15px;
      border-radius: 4px;
      margin: 8px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .drag-result::after {
      content: "✓";
      color: var(--success);
      font-weight: bold;
    }
    
    /* Slider */
    .slider-box {
      margin: 25px 0;
    }
    
    .slider-box label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }
    
    input[type="range"] {
      width: 100%;
      height: 8px;
      margin: 15px 0;
      -webkit-appearance: none;
      background: #e0e0e0;
      border-radius: 4px;
      outline: none;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      background: var(--primary);
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.2);
      background: #1565c0;
    }
    
    /* Temperaturanzeige */
    .temperaturanzeige {
      margin: 25px 0;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .tempBarContainer {
      width: 100%;
      height: 30px;
      background-color: #eceff1;
      border-radius: 15px;
      overflow: hidden;
      margin-top: 10px;
      position: relative;
    }
    
    #tempFuellung {
      height: 100%;
      background: linear-gradient(90deg, #ff9800, #f44336);
      width: 70%;
      transition: width 0.5s;
    }
    
    .temp-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 5px;
      font-size: 0.9em;
      color: #616161;
    }
    
    #explosionswarnung {
      background-color: #ffebee;
      color: #c62828;
      padding: 12px;
      border-radius: 4px;
      margin-top: 15px;
      display: none;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.02); }
      100% { transform: scale(1); }
    }
    
    /* Bilder */
    .bildgross {
      width: 100%;
      max-width: 800px;
      height: auto;
      border-radius: 8px;
      margin: 20px auto;
      display: block;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    
    .bildgross:hover {
      transform: scale(1.02);
    }
    
    .entropie-alltag-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin: 25px 0;
    }
    
    .entropie-bild {
      text-align: center;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    
    .entropie-bild:hover {
      transform: translateY(-5px);
    }
    
    .entropie-bild img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 6px;
      margin-bottom: 15px;
      border: 1px solid #e0e0e0;
    }
    
    .entropie-bild p {
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .antwort-auswahl {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 10px;
    }
    
    .antwort-auswahl label {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    
    /* Zuordnungstabelle */
    .zuordnungs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin: 25px 0;
    }
    
    .zuordnungs-kategorie {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .zuordnungs-kategorie h4 {
      margin-top: 0;
      color: var(--primary);
      text-align: center;
      padding-bottom: 10px;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .checkboxen {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .checkboxen label {
      display: flex;
      align-items: center;
      cursor: pointer;
      padding: 8px;
      border-radius: 4px;
      transition: background-color 0.2s;
    }
    
    .checkboxen label:hover {
      background-color: #f5f5f5;
    }
    
    /* Balkendiagramm */
    .balkendiagramm-container {
      margin: 25px 0;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .jahr-auswahl {
      margin-bottom: 20px;
    }
    
    .jahr-auswahl label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }
    
    .balken-eintrag {
      display: flex;
      align-items: center;
      margin: 12px 0;
    }
    
    .balken-eintrag span:first-child {
      width: 100px;
      font-weight: bold;
    }
    
    .balken-eintrag span:last-child {
      width: 50px;
      text-align: right;
    }
    
    .balken {
      flex-grow: 1;
      height: 25px;
      background-color: #eceff1;
      border-radius: 4px;
      overflow: hidden;
      margin: 0 15px;
      position: relative;
    }
    
    .balken-fuellung {
      height: 100%;
      transition: width 0.5s ease;
    }
    
    .balken-haushalte {
      background-color: var(--success);
    }
    
    .balken-verkehr {
      background-color: var(--secondary);
    }
    
    .balken-industrie {
      background-color: var(--primary);
    }
    
    .balken-gewerbe {
      background-color: #9C27B0;
    }
    
    /* Karten */
    .karte {
      height: 450px;
      border-radius: 8px;
      margin: 25px 0;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      border: 1px solid #e0e0e0;
    }
    
    .kartenumschalter {
      display: flex;
      gap: 15px;
      margin: 15px 0;
      justify-content: center;
    }
    
    .kartenumschalter label {
      display: flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
      padding: 8px 15px;
      background: white;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }
    
    .kartenumschalter label:hover {
      background: #f5f5f5;
    }
    
    /* Verbrauchsrechner */
    .verbrauch-formular {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      margin: 25px 0;
      background: white;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .verbrauch-formular label {
      display: block;
    }
    
    .verbrauch-formular input {
      width: 100%;
      padding: 10px;
      border: 1px solid #b0bec5;
      border-radius: 4px;
      margin-top: 8px;
      font-size: 16px;
      transition: border-color 0.3s;
    }
    
    .verbrauch-formular input:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.2);
    }
    
    #verbrauchErgebnis {
      background-color: #e3f2fd;
      padding: 20px;
      border-radius: 8px;
      margin-top: 20px;
      border-left: 4px solid var(--primary);
    }
    
    /* Tooltips */
    .tooltip {
      position: absolute;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 14px;
      z-index: 100;
      max-width: 250px;
      pointer-events: none;
      transform: translateY(5px);
      opacity: 0;
      transition: opacity 0.2s, transform 0.2s;
    }
    
    .tooltip.active {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Animierte Elemente */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    section {
      animation: fadeIn 0.5s ease forwards;
    }
    
    section:nth-child(2) { animation-delay: 0.1s; }
    section:nth-child(3) { animation-delay: 0.2s; }
    section:nth-child(4) { animation-delay: 0.3s; }
    section:nth-child(5) { animation-delay: 0.4s; }
    
    /* Energiefluss Animation */
    .kraftwerk-diagramm {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 30px 0;
      position: relative;
    }
    
    .kraftwerk-element {
      text-align: center;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      z-index: 1;
      transition: all 0.3s;
      cursor: pointer;
      flex: 1;
      max-width: 200px;
    }
    
    .kraftwerk-element:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .kraftwerk-pfeil {
      font-size: 24px;
      color: #757575;
      animation: flow 2s infinite;
    }
    
    @keyframes flow {
      0% { opacity: 0.5; }
      50% { opacity: 1; }
      100% { opacity: 0.5; }
    }
    
    /* Responsive Anpassungen */
    @media (max-width: 768px) {
      .hero {
        padding: 60px 15px;
      }
      
      .hero h1 {
        font-size: 2em;
      }
      
      .drop-area {
        flex-direction: column;
      }
      
      .kraftwerk-diagramm {
        flex-direction: column;
      }
      
      .kraftwerk-element {
        max-width: 100%;
        margin-bottom: 15px;
      }
      
      .kraftwerk-pfeil {
        transform: rotate(90deg);
        margin: 10px 0;
      }
      
      .zuordnungs-grid {
        grid-template-columns: 1fr;
      }
      
      .entropie-alltag-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 480px) {
      #navbar ul {
        gap: 8px;
      }
      
      #navbar a {
        font-size: 0.9em;
        padding: 5px 8px;
      }
      
      .antwort-auswahl {
        flex-direction: column;
        gap: 8px;
      }
    }
    /* === CSS-ENDE === */
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>

  <!-- Progress-Balken -->
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <!-- Navigation -->
  <nav id="navbar">
    <ul>
      <li><a href="#reversibel">1. Reversibel</a></li>
      <li><a href="#entropie">2. Entropie</a></li>
      <li><a href="#energiefluss">3. Energiefluss</a></li>
      <li><a href="#kuehlturm">4. Kühlturm</a></li>
      <li><a href="#alltag">5. Alltag</a></li>
      <li><a href="#traeger">6. Energieträger</a></li>
      <li><a href="#bedarf">7. Bedarf</a></li>
      <li><a href="#infrastruktur">8. Infrastruktur</a></li>
      <li><a href="#wende">9. Wende</a></li>
      <li><a href="#wildpoldsried">10. Wildpoldsried</a></li>
      <li><a href="#doerfer">11. Dörfer</a></li>
      <li><a href="#verbrauch">12. Verbrauch</a></li>
    </ul>
  </nav>

  <!-- Header -->
  <header class="hero">
    <div class="hero-text">
      <h1>Energieversorgung verstehen</h1>
      <p>Interaktive Lernplattform zur Energieumwandlung, Entropie und Energiewende</p>
    </div>
  </header>

  <!-- Hauptinhalt -->
  <div class="container">
    <!-- Abschnitt 1: Reversibel vs. Irreversibel -->
    <section id="reversibel">
      <h2>1. Reversibel vs. Irreversibel</h2>
      <h3>Reversible und irreversible Vorgänge</h3>
      
      <div class="infobox orange">
        <h4>🧠 Einführung: Was bedeutet reversibel und irreversibel?</h4>
        <p>In der Physik beschreibt man viele Prozesse danach, ob sie sich umkehren lassen oder nicht.</p>
        <ul>
          <li>🟢 <strong>Reversibel:</strong> Ein Vorgang ist reversibel, wenn man ihn vollständig rückgängig machen kann – ohne dass dabei Energie verloren geht oder etwas „kaputtgeht".</li>
          <li>🔴 <strong>Irreversibel:</strong> Ein irreversibler Vorgang kann nicht vollständig zurückgeführt werden. Dabei geht oft Energie in Form von Wärme verloren – und es entsteht <em>Entropie</em>, also Unordnung.</li>
          <li>💡 In der Realität sind fast alle Vorgänge <strong>irreversibel</strong>, weil immer etwas Reibung, Wärme oder Verlust entsteht.</li>
        </ul>

        <div class="beispiele">
          <h5>Beispiele:</h5>
          <ul>
            <li>❄️ <strong>Eis schmilzt:</strong> Kann durch Gefrieren rückgängig gemacht werden → reversibel (wenn ideal).</li>
            <li>🔥 <strong>Holz verbrennen:</strong> Die Asche kann nicht zurück in Holz verwandelt werden → irreversibel.</li>
            <li>☕ <strong>Kaffee kühlt ab:</strong> Die Wärme verteilt sich – man kann ihn nicht einfach wieder heiß machen → irreversibel.</li>
          </ul>
        </div>
      </div>

      <p><strong>Jetzt bist du dran:</strong> Ziehe die folgenden Beispiele in die richtige Kategorie.</p>

      <div class="drag-container">
        <div class="drag-items">
          <div class="drag" draggable="true">🍏 Pendel</div>
          <div class="drag" draggable="true">🔥 Verbrennung</div>
          <div class="drag" draggable="true">💡 Blinken</div>
          <div class="drag" draggable="true">❄️ Kompression (langsam)</div>
          <div class="drag" draggable="true">☕ Kaffee kühlt ab</div>
        </div>
        <div class="drop-area">
          <div class="drop-zone" id="zone-reversibel">
            <h4>🔄 Reversibel</h4>
          </div>
          <div class="drop-zone" id="zone-irreversibel">
            <h4>❌ Irreversibel</h4>
          </div>
        </div>
      </div>

      <p class="definition">
        <strong>Reversibel:</strong> Vorgänge, die sich (idealerweise) umkehrbar abspielen, ohne dass dabei Energie verloren geht.<br>
        <strong>Irreversibel:</strong> Vorgänge, bei denen Entropie entsteht und keine vollständige Rückkehr in den Ursprungszustand möglich ist.
      </p>
    </section>

    <!-- Abschnitt 2: Entropie -->
    <section id="entropie">
      <h2>2. Entropie</h2>
      <h3>Entropie und ihre Bedeutung</h3>

      <div class="infobox orange">
        <h4>🌿 Einführung: Was ist Entropie?</h4>
        <p>Entropie beschreibt die <strong>Unordnung</strong> in einem System. Je geordneter die Dinge sind, desto geringer die Entropie – je chaotischer, desto höher die Entropie.</p>
        <p>🔍 <strong>Einfach erklärt:</strong> Stell dir eine Kiste mit vielen farbigen Kugeln vor. Sind alle Kugeln an ihrem Platz sortiert, ist die Entropie niedrig. Wenn du die Kiste schüttelst und die Kugeln sich unkontrolliert verteilen, steigt die Entropie, weil mehr Unordnung entsteht.</p>
        <p>🔬 <strong>Beispiel:</strong> Ein Eiswürfel schmilzt im warmen Raum. Die Moleküle im festen Eis waren sehr geordnet; im geschmolzenen Zustand bewegen sich die Wassermoleküle ungeordnet im Glas – die Entropie steigt.</p>
        <p>⚠️ <strong>2. Hauptsatz der Thermodynamik:</strong> In einem abgeschlossenen System nimmt die Entropie immer zu. Wärme fließt spontan immer von warm nach kalt, wodurch Entropie erzeugt wird.</p>
        <p>➡️ Du siehst also: Entropie ist nichts Mysteriöses, sondern beschreibt genau, wie geordnet oder ungeordnet ein Vorgang abläuft.</p>
      </div>

      <!-- Bild mit Teilchenverteilung -->
      <div style="text-align: center; margin: 25px 0;">
        <img src="https://images.unsplash.com/photo-1610220941051-5c8c9a0b9a9a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Teilchenmodell zur Entropie" style="max-width: 100%; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <p style="font-style: italic; color: #616161; margin-top: 8px;">Teilchenmodell: Links geordnet (niedrige Entropie), rechts ungeordnet (hohe Entropie)</p>
      </div>

      <!-- Slider zur Temperaturdifferenz -->
      <div class="slider-box">
        <label for="tempDiff">Temperaturdifferenz (ΔT): <span id="tempDisplay">30</span> °C</label>
        <input type="range" id="tempDiff" min="0" max="100" step="1" value="30">
        <p>Geschätzte Entropiezunahme: <strong><span id="entropieWert">0.10</span> kJ/K</strong></p>
      </div>

      <!-- Quizfrage -->
      <div class="quizbox">
        <p><strong>Quizfrage:</strong> Was beschreibt den 2. Hauptsatz der Thermodynamik?</p>
        <button class="quiz-btn">🔋 Energie bleibt immer erhalten</button>
        <button class="quiz-btn correct">📈 Entropie nimmt in abgeschlossenen Systemen zu</button>
        <button class="quiz-btn">🌡️ Temperatur bleibt konstant</button>
      </div>
    </section>

    <!-- Abschnitt 3: Energieflussdiagramm -->
    <section id="energiefluss">
      <h2>3. Energieflussdiagramm</h2>
      <h3>Energiefluss im Kraftwerk – Interaktiv</h3>

      <div class="infobox orange">
        <h4>🔍 Energiefluss im Überblick</h4>
        <p>In der <strong>Feuerkammer</strong> wird Brennstoff verbrannt und erhitzt Wasser zu <strong>Dampf</strong>. Dieser Dampf treibt die <strong>Turbine</strong> an, welche den <strong>Generator</strong> in Drehung versetzt und so Strom erzeugt. Übrig gebliebener Dampf wird im <strong>Kondensator</strong> wieder zu Wasser – der Kreislauf schließt sich.</p>
      </div>

      <!-- Diagramm -->
      <div class="kraftwerk-diagramm">
        <div class="kraftwerk-element" onclick="zeigeDetails('Feuerkammer')">
          <h4>Feuerkammer</h4>
          <img src="https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?ixlib=rb-1.2.1&auto=format&fit=crop&w=200&q=80" alt="Feuerkammer" style="width: 100%; height: 120px; object-fit: cover; border-radius: 4px;">
        </div>
        <div class="kraftwerk-pfeil">➡️</div>
        <div class="kraftwerk-element" onclick="zeigeDetails('Turbine')">
          <h4>Turbine</h4>
          <img src="https://images.unsplash.com/photo-1581094271901-8022df4466f9?ixlib=rb-1.2.1&auto=format&fit=crop&w=200&q=80" alt="Turbine" style="width: 100%; height: 120px; object-fit: cover; border-radius: 4px;">
        </div>
        <div class="kraftwerk-pfeil">➡️</div>
        <div class="kraftwerk-element" onclick="zeigeDetails('Generator')">
          <h4>Generator</h4>
          <img src="https://images.unsplash.com/photo-1581093057305-5e0d6fab2c5a?ixlib=rb-1.2.1&auto=format&fit=crop&w=200&q=80" alt="Generator" style="width: 100%; height: 120px; object-fit: cover; border-radius: 4px;">
        </div>
        <div class="kraftwerk-pfeil">➡️</div>
        <div class="kraftwerk-element" onclick="zeigeDetails('Kondensator')">
          <h4>Kondensator</h4>
          <img src="https://images.unsplash.com/photo-1581093057305-5e0d6fab2c5a?ixlib=rb-1.2.1&auto=format&fit=crop&w=200&q=80" alt="Kondensator" style="width: 100%; height: 120px; object-fit: cover; border-radius: 4px;">
        </div>
      </div>

      <!-- Info bei Klick -->
      <div id="details-box" class="infobox green" style="display: none;">
        <p><strong>Details:</strong> <span id="details-text">...</span></p>
      </div>

      <!-- Temperatur-Slider -->
      <div class="slider-box">
        <label for="kesselTemp">Kesseltemperatur (°C): <span id="kesselTempDisplay">500</span></label>
        <input type="range" id="kesselTemp" min="300" max="700" step="10" value="500">
        <p>Wirkungsgrad: <strong><span id="wirkungsgrad">35</span>%</strong><br>
           Elektrische Leistung: <strong><span id="leistung">350</span> MW</strong></p>
      </div>
    </section>

    <!-- Abschnitt 4: Kühlturm -->
    <section id="kuehlturm">
      <h2>4. Kühlturm</h2>
      <h3>Kühlung im Kraftwerksprozess</h3>

      <div class="infobox orange">
        <h4>❄️ Warum ist Kühlung wichtig?</h4>
        <p>Ein Kraftwerk erzeugt nicht nur elektrische Energie – es produziert auch sehr viel <strong>Abwärme</strong>. Diese muss durch Kühlung abgeführt werden, z. B. über einen großen <strong>Kühlturm</strong>. Wird die Kühlung deaktiviert, kann sich das System überhitzen – im schlimmsten Fall: <strong>Explosion!</strong></p>
      </div>

      <div style="text-align: center; margin: 25px 0;">
        <img src="https://images.unsplash.com/photo-1559302996-0d0e8e5cb3ec?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Kühlturm" style="max-width: 100%; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
      </div>

      <!-- Kühlturm-Steuerung -->
      <div class="cooling-control" style="margin: 20px 0;">
        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
          <input type="checkbox" id="kuehlungCheckbox" checked style="transform: scale(1.5);">
          <span style="font-size: 1.1em;">💧 Kühlung aktivieren</span>
        </label>
      </div>

      <!-- Temperaturanzeige -->
      <div class="temperaturanzeige">
        <p>Kesseltemperatur: <strong><span id="anzeigeTemp">550</span> °C</strong></p>
        <div class="tempBarContainer">
          <div id="tempFuellung" style="width: 70%;"></div>
        </div>
        <div class="temp-labels">
          <span>300°C</span>
          <span>700°C</span>
        </div>
      </div>

      <!-- Warnung bei Deaktivierung -->
      <div id="explosionswarnung" class="explosion-box" style="display: none;">
        💥 <strong>Achtung!</strong> Die Temperatur steigt unkontrolliert – das System ist instabil!
      </div>
    </section>

    <!-- Abschnitt 5: Entropie im Alltag -->
    <section id="alltag">
      <h2>5. Entropie im Alltag</h2>
      <h3>Wo begegnet uns Entropie?</h3>

      <div class="infobox orange">
        <h4>🔎 Beispiele aus dem Alltag</h4>
        <p>Auch im Alltag begegnet uns Entropie ständig – ob beim Kochen, im Bad oder im Auto.</p>
      </div>

      <!-- Bild + Auswahl -->
      <div class="entropie-alltag-grid">
        <div class="entropie-bild">
          <img src="https://images.unsplash.com/photo-1594818379496-da1e345b0ded?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Badewanne">
          <p>Badewanne kühlt aus</p>
          <div class="antwort-auswahl">
            <label><input type="radio" name="badewanne" value="reversibel"> Reversibel</label>
            <label><input type="radio" name="badewanne" value="irreversibel"> Irreversibel</label>
          </div>
        </div>

        <div class="entropie-bild">
          <img src="https://images.unsplash.com/photo-1550583724-b2692b85b150?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Gekochtes Ei">
          <p>Ei wird hart gekocht</p>
          <div class="antwort-auswahl">
            <label><input type="radio" name="ei" value="reversibel"> Reversibel</label>
            <label><input type="radio" name="ei" value="irreversibel"> Irreversibel</label>
          </div>
        </div>

        <div class="entropie-bild">
          <img src="https://images.unsplash.com/photo-1554866585-cd94860890b7?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Cola-Dose geöffnet">
          <p>Cola-Dose geöffnet</p>
          <div class="antwort-auswahl">
            <label><input type="radio" name="cola" value="reversibel"> Reversibel</label>
            <label><input type="radio" name="cola" value="irreversibel"> Irreversibel</label>
          </div>
        </div>
      </div>

      <!-- Quizauswertung -->
      <button class="quiz-auswerten-btn" onclick="auswertenEntropieAlltag()">Antworten überprüfen</button>
      <div id="feedbackAlltag" class="feedback-box"></div>
    </section>

    <!-- Abschnitt 6: Energieträger -->
    <section id="traeger">
      <h2>6. Energieträger</h2>
      <h3>Ordne die Energieträger ein</h3>

      <div class="infobox orange">
        <h4>🔋 Was sind Energieträger?</h4>
        <p>Energieträger sind Stoffe oder Quellen, die Energie enthalten, die wir nutzen können. Sie lassen sich nach zwei Kriterien einteilen:</p>
        <ul>
          <li><strong>Primär / Sekundär:</strong> Direkt in der Natur vorkommend oder weiterverarbeitet</li>
          <li><strong>Regenerativ / Nicht regenerativ:</strong> Nachhaltig verfügbar oder endlich</li>
        </ul>
      </div>

      <!-- Zuordnungstabelle -->
      <div class="zuordnungs-grid">
        <div class="zuordnungs-kategorie">
          <h4>Primär</h4>
          <div class="checkboxen">
            <label><input type="checkbox" name="primär" value="Erdgas"> Erdgas</label>
            <label><input type="checkbox" name="primär" value="Sonnenlicht"> Sonnenlicht</label>
            <label><input type="checkbox" name="primär" value="Kohle"> Kohle</label>
            <label><input type="checkbox" name="primär" value="Wind"> Wind</label>
          </div>
        </div>

        <div class="zuordnungs-kategorie">
          <h4>Sekundär</h4>
          <div class="checkboxen">
            <label><input type="checkbox" name="sekundär" value="Wasserstoff"> Wasserstoff</label>
            <label><input type="checkbox" name="sekundär" value="Benzin"> Benzin</label>
            <label><input type="checkbox" name="sekundär" value="Strom"> Strom</label>
            <label><input type="checkbox" name="sekundär" value="Fernwärme"> Fernwärme</label>
          </div>
        </div>

        <div class="zuordnungs-kategorie">
          <h4>Regenerativ</h4>
          <div class="checkboxen">
            <label><input type="checkbox" name="regenerativ" value="Wind"> Wind</label>
            <label><input type="checkbox" name="regenerativ" value="Sonnenlicht"> Sonnenlicht</label>
            <label><input type="checkbox" name="regenerativ" value="Holz"> Holz</label>
            <label><input type="checkbox" name="regenerativ" value="Biogas"> Biogas</label>
          </div>
        </div>

        <div class="zuordnungs-kategorie">
          <h4>Nicht regenerativ</h4>
          <div class="checkboxen">
            <label><input type="checkbox" name="nicht-regenerativ" value="Kohle"> Kohle</label>
            <label><input type="checkbox" name="nicht-regenerativ" value="Erdgas"> Erdgas</label>
            <label><input type="checkbox" name="nicht-regenerativ" value="Uran"> Uran</label>
            <label><input type="checkbox" name="nicht-regenerativ" value="Benzin"> Benzin</label>
          </div>
        </div>
      </div>

      <!-- Auswertungsbutton -->
      <button class="quiz-auswerten-btn" onclick="auswertenTraeger()">Antworten überprüfen</button>
      <div id="feedbackTraeger" class="feedback-box"></div>
    </section>

    <!-- Abschnitt 7: Energiebedarf -->
    <section id="bedarf">
      <h2>7. Energiebedarf</h2>
      <h3>Entwicklung des Energieverbrauchs</h3>

      <div class="infobox orange">
        <h4>📈 Wie verändert sich unser Energiebedarf?</h4>
        <p>In Deutschland hat sich der Energiebedarf seit dem 20. Jahrhundert stark verändert – durch Industrie, Verkehr, Haushalte und Digitalisierung. In der Grafik siehst du, wie sich der Verbrauch in verschiedenen Bereichen über die Zeit entwickelt.</p>
      </div>

      <!-- Zeitstrahl / Balkendiagramm -->
      <div class="balkendiagramm-container">
        <div class="jahr-auswahl">
          <label for="jahrSlider">Jahr: <span id="jahrAnzeige">1970</span></label>
          <input type="range" id="jahrSlider" min="1970" max="2020" step="10" value="1970">
        </div>

        <div class="balken">
          <div class="balken-eintrag">
            <span>Haushalte</span>
            <div class="balken">
              <div class="balken-fuellung balken-haushalte" style="width: 30%;"></div>
            </div>
            <span id="wertHaushalt">30%</span>
          </div>
          <div class="balken-eintrag">
            <span>Verkehr</span>
            <div class="balken">
              <div class="balken-fuellung balken-verkehr" style="width: 25%;"></div>
            </div>
            <span id="wertVerkehr">25%</span>
          </div>
          <div class="balken-eintrag">
            <span>Industrie</span>
            <div class="balken">
              <div class="balken-fuellung balken-industrie" style="width: 35%;"></div>
            </div>
            <span id="wertIndustrie">35%</span>
          </div>
          <div class="balken-eintrag">
            <span>Gewerbe</span>
            <div class="balken">
              <div class="balken-fuellung balken-gewerbe" style="width: 10%;"></div>
            </div>
            <span id="wertGewerbe">10%</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Abschnitt 8: Infrastruktur -->
    <section id="infrastruktur">
      <h2>8. Strom- und Gasinfrastruktur in Europa</h2>

      <div class="infobox orange">
        <h4>🗺️ Wie sind Strom und Gas vernetzt?</h4>
        <p>Europa ist über Stromtrassen und Gaspipelines eng miteinander verbunden. Du kannst in der Karte unten zwischen beiden Infrastrukturen umschalten.</p>
      </div>

      <!-- Kartenumschalter -->
      <div class="kartenumschalter">
        <label><input type="radio" name="karte" value="strom" checked> 🔌 Stromnetz</label>
        <label><input type="radio" name="karte" value="gas"> 🔥 Gasnetz</label>
      </div>

      <!-- Karte -->
      <div id="europakarte" class="karte"></div>
    </section>

    <!-- Abschnitt 9: Energiewende-Projekte -->
    <section id="wende">
      <h2>9. Energiewende: Projekte in Deutschland</h2>

      <div class="infobox orange">
        <h4>🏗️ Beispielhafte Projekte</h4>
        <p>Viele Städte und Gemeinden setzen auf neue Energiekonzepte. Auf der Karte siehst du einige ausgewählte Orte mit Kurzinfos.</p>
      </div>

      <div id="deutschlandkarte" class="karte"></div>
    </section>

    <!-- Abschnitt 10: Wildpoldsried -->
    <section id="wildpoldsried">
      <h2>10. Wildpoldsried</h2>
      <h3>Beispiel für ein energieautarkes Dorf</h3>

      <div class="infobox green">
        <p>Wildpoldsried in Bayern erzeugt <strong>mehr Energie als es verbraucht</strong> – und das mit Photovoltaik, Biogas, Wind und Wasserkraft. Es gilt als Vorzeigegemeinde der Energiewende.</p>
      </div>

      <img src="https://images.unsplash.com/photo-1508514177221-188b1cf16e9d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Luftbild Wildpoldsried" class="bildgross">
    </section>

    <!-- Abschnitt 11: Energiedörfer -->
    <section id="doerfer">
      <h2>11. Weitere Energiedörfer</h2>

      <div class="infobox orange">
        <p>Auch andere Dörfer setzen auf erneuerbare Energien. Klicke auf der Karte auf die Orte und erfahre mehr!</p>
      </div>

      <div id="energiedoerferKarte" class="karte"></div>
    </section>

    <!-- Abschnitt 12: Stromverbrauch-Rechner -->
    <section id="verbrauch">
      <h2>12. Energieverbrauchs-Rechner</h2>
      <h3>Was verbraucht dein Haushalt?</h3>

      <div class="verbrauch-formular">
        <label>
          Anzahl Personen im Haushalt:
          <input type="number" id="personen" min="1" value="3">
        </label>
        <label>
          Geräte im Dauerbetrieb (z. B. Router, Kühlschrank):
          <input type="number" id="dauerbetrieb" value="3">
        </label>
        <label>
          Anzahl Waschladungen pro Woche:
          <input type="number" id="waschen" value="4">
        </label>

        <button onclick="verbrauchBerechnen()" class="btn btn-primary">Verbrauch berechnen</button>
      </div>

      <div id="verbrauchErgebnis" class="verbrauch-ausgabe"></div>
    </section>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Lernplattform „Energie verstehen" – Alle Rechte vorbehalten.</p>
  </footer>

  <!-- JavaScript -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Progress-Balken
    window.onscroll = function() {
      const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      document.getElementById("progressBar").style.width = scrolled + "%";
    };

    // Allgemeine Quiz-Buttons
    document.querySelectorAll('.quizbox').forEach(quizbox => {
      const buttons = quizbox.querySelectorAll('.quiz-btn');
      
      buttons.forEach(btn => {
        btn.addEventListener('click', () => {
          buttons.forEach(b => b.disabled = true);
          
          if (btn.classList.contains('correct')) {
            btn.classList.add('correct');
            btn.innerHTML += ' ✅';
          } else {
            btn.classList.add('incorrect');
            btn.innerHTML += ' ❌';
          }
        });
      });
    });
    
    // Entropie-Slider
    const tempSlider = document.getElementById('tempDiff');
    const tempDisplay = document.getElementById('tempDisplay');
    const entropieWert = document.getElementById('entropieWert');
    
    tempSlider.addEventListener('input', () => {
      const deltaT = parseInt(tempSlider.value);
      tempDisplay.textContent = deltaT;
      
      // Realistischere Entropieberechnung
      const entropie = (deltaT * 0.0034 * Math.log(deltaT + 1)).toFixed(2);
      entropieWert.textContent = entropie;
    });
    
    // Kühlturm-Simulation
    const kuehlung = document.getElementById('kuehlungCheckbox');
    const tempAnzeige = document.getElementById('anzeigeTemp');
    const tempFuellung = document.getElementById('tempFuellung');
    const explosion = document.getElementById('explosionswarnung');
    
    let aktuelleTemp = 550;
    let temperaturTimer = null;
    
    function updateTempAnzeige() {
      tempAnzeige.textContent = aktuelleTemp;
      let prozent = Math.min(100, (aktuelleTemp - 300) / 4);
      tempFuellung.style.width = `${prozent}%`;
      
      // Farbe ändern bei hohen Temperaturen
      if (aktuelleTemp > 600) {
        tempFuellung.style.background = 'linear-gradient(90deg, #ff5722, #f44336)';
      } else {
        tempFuellung.style.background = 'linear-gradient(90deg, #ff9800, #ff5722)';
      }
      
      if (aktuelleTemp >= 700) {
        explosion.style.display = 'block';
      } else {
        explosion.style.display = 'none';
      }
    }
    
    function startenTempSimulation() {
      if (temperaturTimer) clearInterval(temperaturTimer);
      
      temperaturTimer = setInterval(() => {
        if (kuehlung.checked) {
          // Kühlung aktiv - Temperatur sinkt langsam
          aktuelleTemp = Math.max(300, aktuelleTemp - (Math.random() * 2 + 1));
        } else {
          // Kühlung inaktiv - Temperatur steigt schneller
          aktuelleTemp += (Math.random() * 6 + 3);
          if (aktuelleTemp > 800) aktuelleTemp = 800; // Maximaltemperatur
        }
        updateTempAnzeige();
      }, 300);
    }
    
    kuehlung.addEventListener('change', startenTempSimulation);
    startenTempSimulation();
    
    // Energiefluss-Details
    function zeigeDetails(teil) {
      const detailsBox = document.getElementById('details-box');
      const detailsText = document.getElementById('details-text');
      
      const infoTexte = {
        "Feuerkammer": "Hier wird Brennstoff (z.B. Kohle oder Gas) verbrannt, um Wasser zu erhitzen und Dampf zu erzeugen. Temperaturen von 500-600°C sind typisch. Der Wirkungsgrad liegt bei etwa 35-45%.",
        "Turbine": "Der heiße Dampf (bis zu 600°C) trifft mit hohem Druck (bis zu 250 bar) auf die Turbinenschaufeln und setzt sie in Rotation. Die thermische Energie wird in mechanische Energie umgewandelt. Moderne Turbinen haben einen Wirkungsgrad von bis zu 90%.",
        "Generator": "Die rotierende Turbine treibt den Generator an (typisch 1.500-3.000 U/min), der durch elektromagnetische Induktion die mechanische Energie in elektrische Energie umwandelt. Der Wirkungsgrad liegt bei etwa 98-99%.",
        "Kondensator": "Der Dampf wird durch Kühlwasser auf etwa 30°C abgekühlt und kondensiert zurück zu Wasser, das wieder in den Kreislauf eingespeist wird. Dabei geht etwa 50-60% der ursprünglichen Energie als Abwärme verloren."
      };
      
      detailsText.textContent = infoTexte[teil] || "Keine Informationen verfügbar.";
      detailsBox.style.display = "block";
      
      // Automatisches Ausblenden nach 10 Sekunden
      setTimeout(() => {
        detailsBox.style.display = "none";
      }, 10000);
    }
    
    // Kesseltemperatur-Slider
    const kesselSlider = document.getElementById('kesselTemp');
    kesselSlider.addEventListener('input', function() {
      const temp = parseInt(this.value);
      document.getElementById('kesselTempDisplay').textContent = temp;
      
      // Realistischere Berechnungen
      const wirkungsgrad = Math.round(25 + (temp - 300) * 0.05 + Math.random() * 2);
      const leistung = Math.round(200 + (temp - 300) * 0.75 + Math.random() * 10);
      
      document.getElementById('wirkungsgrad').textContent = Math.min(45, wirkungsgrad);
      document.getElementById('leistung').textContent = Math.min(500, leistung);
    });
    
    // Drag & Drop
    document.querySelectorAll('.drag').forEach(dragItem => {
      dragItem.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', dragItem.textContent);
        dragItem.style.opacity = '0.4';
      });
      
      dragItem.addEventListener('dragend', () => {
        dragItem.style.opacity = '1';
      });
    });
    
    document.querySelectorAll('.drop-zone').forEach(zone => {
      zone.addEventListener('dragover', e => {
        e.preventDefault();
        zone.classList.add('highlight');
      });
      
      zone.addEventListener('dragleave', () => {
        zone.classList.remove('highlight');
      });
      
      zone.addEventListener('drop', e => {
        e.preventDefault();
        zone.classList.remove('highlight');
        
        const data = e.dataTransfer.getData('text/plain');
        const neuesElement = document.createElement('div');
        neuesElement.textContent = data;
        neuesElement.classList.add('drag-result');
        zone.appendChild(neuesElement);
      });
    });
    
    // Entropie im Alltag Auswertung
    function auswertenEntropieAlltag() {
      const richtig = {
        badewanne: 'irreversibel',
        ei: 'irreversibel',
        cola: 'irreversibel'
      };
      
      let punkte = 0;
      for (let key in richtig) {
        const antwort = document.querySelector(`input[name="${key}"]:checked`);
        if (antwort && antwort.value === richtig[key]) {
          punkte++;
        }
      }
      
      const ausgabe = document.getElementById('feedbackAlltag');
      ausgabe.textContent = punkte === 3 
        ? 'Perfekt! ✅ Alle Antworten sind richtig. Die Entropie nimmt in allen Fällen zu.' 
        : `Du hast ${punkte} von 3 richtig. ❌ Alle diese Prozesse sind irreversibel, da die Entropie zunimmt.`;
      
      if (punkte === 3) {
        ausgabe.className = 'feedback-box feedback-correct';
      } else {
        ausgabe.className = 'feedback-box feedback-incorrect';
      }
    }
    
    // Energieträger Auswertung
    function auswertenTraeger() {
      const korrekt = {
        'primär': ['Erdgas', 'Sonnenlicht', 'Kohle', 'Wind'],
        'sekundär': ['Wasserstoff', 'Benzin', 'Strom', 'Fernwärme'],
        'regenerativ': ['Wind', 'Sonnenlicht', 'Holz', 'Biogas'],
        'nicht-regenerativ': ['Kohle', 'Erdgas', 'Uran', 'Benzin']
      };
      
      let fehler = 0;
      let feedbackDetails = [];
      
      for (let gruppe in korrekt) {
        const angeklickt = Array.from(document.querySelectorAll(`input[name="${gruppe}"]:checked`)).map(e => e.value);
        const richtig = korrekt[gruppe];
        
        const zuViele = angeklickt.filter(a => !richtig.includes(a));
        const zuWenig = richtig.filter(r => !angeklickt.includes(r));
        
        if (zuViele.length > 0 || zuWenig.length > 0) {
          fehler++;
          if (zuViele.length > 0) {
            feedbackDetails.push(`Falsche Zuordnung in ${gruppe}: ${zuViele.join(', ')}`);
          }
          if (zuWenig.length > 0) {
            feedbackDetails.push(`Fehlende Zuordnung in ${gruppe}: ${zuWenig.join(', ')}`);
          }
        }
      }
      
      const feedback = document.getElementById('feedbackTraeger');
      
      if (fehler === 0) {
        feedback.innerHTML = `
          <strong>Alles korrekt! ✅</strong>
          <p>Primäre Energieträger kommen direkt aus der Natur, sekundäre sind weiterverarbeitet. 
          Regenerative Energien sind nachhaltig, nicht-regenerative endlich.</p>
        `;
        feedback.className = 'feedback-box feedback-correct';
      } else {
        feedback.innerHTML = `
          <strong>${fehler} Kategorien enthalten Fehler. ❌</strong>
          <ul>${feedbackDetails.map(d => `<li>${d}</li>`).join('')}</ul>
          <p>Tipp: Primär = direkt aus der Natur, Sekundär = verarbeitet. 
          Regenerativ = erneuerbar, nicht-regenerativ = endlich.</p>
        `;
        feedback.className = 'feedback-box feedback-incorrect';
      }
    }
    
    // Energiebedarf Slider
    const jahresDaten = {
      1970: { haushalt: 30, verkehr: 25, industrie: 35, gewerbe: 10 },
      1980: { haushalt: 28, verkehr: 27, industrie: 32, gewerbe: 13 },
      1990: { haushalt: 25, verkehr: 30, industrie: 30, gewerbe: 15 },
      2000: { haushalt: 22, verkehr: 32, industrie: 28, gewerbe: 18 },
      2010: { haushalt: 20, verkehr: 33, industrie: 27, gewerbe: 20 },
      2020: { haushalt: 18, verkehr: 35, industrie: 25, gewerbe: 22 }
    };
    
    const jahrSlider = document.getElementById('jahrSlider');
    jahrSlider.addEventListener('input', function() {
      const jahr = this.value;
      const daten = jahresDaten[jahr];
      
      document.getElementById('jahrAnzeige').textContent = jahr;
      
      // Balken animiert aktualisieren
      const balken = {
        haushalt: document.querySelector('.balken-haushalte'),
        verkehr: document.querySelector('.balken-verkehr'),
        industrie: document.querySelector('.balken-industrie'),
        gewerbe: document.querySelector('.balken-gewerbe')
      };
      
      for (let key in balken) {
        balken[key].style.width = daten[key] + '%';
      }
      
      // Werte aktualisieren
      document.getElementById('wertHaushalt').textContent = daten.haushalt + '%';
      document.getElementById('wertVerkehr').textContent = daten.verkehr + '%';
      document.getElementById('wertIndustrie').textContent = daten.industrie + '%';
      document.getElementById('wertGewerbe').textContent = daten.gewerbe + '%';
    });
    
    // Initialisierung des Sliders
    jahrSlider.dispatchEvent(new Event('input'));
    
    // Verbrauchsrechner
    function verbrauchBerechnen() {
      const personen = parseInt(document.getElementById('personen').value) || 0;
      const dauerbetrieb = parseInt(document.getElementById('dauerbetrieb').value) || 0;
      const waschen = parseInt(document.getElementById('waschen').value) || 0;
      
      // Realistischere Berechnung (kWh pro Jahr)
      const grundbedarf = personen * 500 * (1 + Math.random() * 0.2 - 0.1); // ±10% Variation
      const dauerstrom = dauerbetrieb * 80 * (1 + Math.random() * 0.1); // ±5% Variation
      const waschstrom = waschen * 0.8 * 52 * (1 + Math.random() * 0.15); // ±7.5% Variation
      
      const gesamt = Math.round(grundbedarf + dauerstrom + waschstrom);
      const co2 = Math.round(gesamt * 0.4); // Durchschnittlicher CO2-Ausstoß in kg
      const kosten = Math.round(gesamt * 0.30); // Durchschnittlicher Preis von 30 Cent/kWh
      
      const ausgabe = document.getElementById('verbrauchErgebnis');
      ausgabe.innerHTML = `
        <h4>Dein geschätzter Stromverbrauch:</h4>
        <p><strong>${gesamt.toLocaleString()} kWh pro Jahr</strong></p>
        <p>Das entspricht etwa:</p>
        <ul>
          <li>${Math.round(gesamt / 1500)} Waschmaschinenladungen</li>
          <li>${Math.round(gesamt / 100)} Stunden Staubsaugen</li>
          <li>${co2.toLocaleString()} kg CO₂-Emissionen</li>
        </ul>
        <p>Kosten: ca. ${kosten.toLocaleString()} € pro Jahr</p>
        <p style="font-size: 0.9em; color: #666;">Hinweis: Dies ist eine grobe Schätzung. Der tatsächliche Verbrauch kann abweichen.</p>
      `;
    }
    
    // Tooltips für Fachbegriffe
    const tooltipElements = document.querySelectorAll('[data-tooltip]');
    let currentTooltip = null;
    
    tooltipElements.forEach(el => {
      el.addEventListener('mouseenter', (e) => {
        if (currentTooltip) currentTooltip.remove();
        
        currentTooltip = document.createElement('div');
        currentTooltip.className = 'tooltip';
        currentTooltip.textContent = el.getAttribute('data-tooltip');
        document.body.appendChild(currentTooltip);
        
        const rect = el.getBoundingClientRect();
        currentTooltip.style.left = `${rect.left + rect.width/2 - currentTooltip.offsetWidth/2}px`;
        currentTooltip.style.top = `${rect.top - currentTooltip.offsetHeight - 10}px`;
        
        setTimeout(() => {
          currentTooltip.classList.add('active');
        }, 10);
      });
      
      el.addEventListener('mouseleave', () => {
        if (currentTooltip) {
          currentTooltip.remove();
          currentTooltip = null;
        }
      });
    });
    
    // Karten initialisieren
    // Europakarte
    const europaKarte = L.map('europakarte').setView([50, 10], 4);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(europaKarte);
    
    // Beispielhafte Strom- und Gasnetze
    const stromLayer = L.layerGroup([
      L.polyline([[55, 8], [50, 8], [48, 11], [52, 13], [55, 12]], {color: 'red', weight: 3}),
      L.polyline([[48, 2], [50, 5], [52, 7]], {color: 'red', weight: 3}),
      L.polyline([[60, 20], [55, 18], [50, 15]], {color: 'red', weight: 3})
    ]).addTo(europaKarte);
    
    const gasLayer = L.layerGroup([
      L.polyline([[60, 15], [55, 12], [52, 10], [50, 8], [48, 5]], {color: 'blue', weight: 3}),
      L.polyline([[45, 10], [48, 12], [52, 13]], {color: 'blue', weight: 3}),
      L.polyline([[40, 20], [45, 18], [50, 16]], {color: 'blue', weight: 3})
    ]);
    
    // Kartenumschalter
    document.querySelectorAll('input[name="karte"]').forEach(radio => {
      radio.addEventListener('change', e => {
        if (e.target.value === 'strom') {
          europaKarte.removeLayer(gasLayer);
          europaKarte.addLayer(stromLayer);
        } else {
          europaKarte.removeLayer(stromLayer);
          europaKarte.addLayer(gasLayer);
        }
      });
    });
    
    // Deutschlandkarte mit Projekten
    const deutschlandKarte = L.map('deutschlandkarte').setView([51, 10], 6);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(deutschlandKarte);
    
    const projekte = [
      {name: "Wildpoldsried", coords: [47.766, 10.4], info: "Energieautarkes Dorf in Bayern mit 500% erneuerbarer Energie"},
      {name: "Feldheim", coords: [52.083, 12.533], info: "Erstes energieautarkes Dorf Deutschlands"},
      {name: "Bürgerwindpark", coords: [53.55, 9.0], info: "Gemeinschaftlicher Windpark in Norddeutschland"},
      {name: "Solarstadt Freiburg", coords: [48.0, 7.85], info: "Modellstadt"}];
    // Deutschlandkarte mit Projekten
      const deutschlandKarte = L.map('deutschlandkarte').setView([51, 10], 6);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
      }).addTo(deutschlandKarte);
      
      const projekte = [
        {name: "Wildpoldsried", coords: [47.766, 10.4], info: "Energieautarkes Dorf in Bayern mit 500% erneuerbarer Energie"},
        {name: "Feldheim", coords: [52.083, 12.533], info: "Erstes energieautarkes Dorf Deutschlands"},
        {name: "Bürgerwindpark", coords: [53.55, 9.0], info: "Gemeinschaftlicher Windpark in Norddeutschland"},
        {name: "Solarstadt Freiburg", coords: [48.0, 7.85], info: "Modellstadt für Solarenergie mit innovativen Konzepten"},
        {name: "Energiewende Unterallgäu", coords: [48.0, 10.4], info: "Region mit über 100% erneuerbarer Stromerzeugung"}
      ];
      
      projekte.forEach(projekt => {
        const marker = L.marker(projekt.coords).addTo(deutschlandKarte);
        marker.bindPopup(`
          <h4>${projekt.name}</h4>
          <p>${projekt.info}</p>
          <button onclick="zoomToProject(${projekt.coords})" style="padding: 5px 10px; background: var(--primary); color: white; border: none; border-radius: 3px; cursor: pointer;">
            Mehr anzeigen
          </button>
        `);
      });
      
      // Energiedörfer Karte
      const energiedoerferKarte = L.map('energiedoerferKarte').setView([51, 10], 6);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
      }).addTo(energiedoerferKarte);
      
      const doerfer = [
        {name: "Wildpoldsried", coords: [47.766, 10.4], energie: "500% EE", typ: "Wind, Solar, Biogas"},
        {name: "Feldheim", coords: [52.083, 12.533], energie: "100% EE", typ: "Wind, Biogas"},
        {name: "Dardesheim", coords: [51.966, 10.833], energie: "800% EE", typ: "Wind"},
        {name: "Mauenheim", coords: [47.95, 8.75], energie: "300% EE", typ: "Biogas, Solar"}
      ];
      
      doerfer.forEach(dorf => {
        const marker = L.circleMarker(dorf.coords, {
          radius: 8,
          fillColor: "#4CAF50",
          color: "#2E7D32",
          weight: 1,
          opacity: 1,
          fillOpacity: 0.8
        }).addTo(energiedoerferKarte);
        
        marker.bindPopup(`
          <h4>${dorf.name}</h4>
          <p><strong>Energie:</strong> ${dorf.energie}</p>
          <p><strong>Technologien:</strong> ${dorf.typ}</p>
        `);
      });
      
      // Zoom-Funktion für Projekte
      function zoomToProject(coords) {
        deutschlandKarte.setView(coords, 12);
      }
      
      // Initialisierung der Karten nach Laden der Seite
      window.addEventListener('load', () => {
        setTimeout(() => {
          europaKarte.invalidateSize();
          deutschlandKarte.invalidateSize();
          energiedoerferKarte.invalidateSize();
        }, 100);
      });
    </script>
  </body>
</html>
